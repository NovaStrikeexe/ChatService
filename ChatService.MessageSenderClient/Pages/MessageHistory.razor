@page "/message-history"
@inject MessageService MessageService

<h3>Message History</h3>

<ul>
    @foreach (var msg in messages)
    {
        <li>@msg.Date: @msg.Content</li>
    }
</ul>

@code {
    private List<Message> messages = new List<Message>();

    protected override async Task OnInitializedAsync()
    {
        await LoadMessagesAsync();
    }

    private async Task LoadMessagesAsync()
    {
        var now = DateTime.UtcNow;
        var startTime = now.AddMinutes(-10);
        messages = (await MessageService.GetMessagesAsync(startTime, now)).ToList();
        StateHasChanged(); // Обновляем интерфейс
    }
}